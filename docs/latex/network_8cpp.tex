\hypertarget{network_8cpp}{}\doxysection{/home/mfl24/\+Documents/chai\+Projects/haptic\+Environment/src/network/network.cpp File Reference}
\label{network_8cpp}\index{/home/mfl24/Documents/chaiProjects/hapticEnvironment/src/network/network.cpp@{/home/mfl24/Documents/chaiProjects/hapticEnvironment/src/network/network.cpp}}


General networking functions.  


{\ttfamily \#include \char`\"{}network.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/controller.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{network_8cpp_a2ed65f7844ae0c750272dbd3eca34fa6}{add\+Message\+Handler\+Module}} ()
\item 
int \mbox{\hyperlink{network_8cpp_a2ea5a85aec82381e125efc102f79ec83}{subscribe\+To\+Trial\+Control}} ()
\item 
int \mbox{\hyperlink{network_8cpp_a499c60465b6a1609a460e77684f89ca9}{open\+Messaging\+Socket}} ()
\item 
void \mbox{\hyperlink{network_8cpp_a6d5326c15ff2fc6d7e380d1646c45e4a}{close\+Messaging\+Socket}} ()
\item 
int \mbox{\hyperlink{network_8cpp_ae83f45850eda388f62e5dbae4c9baf5b}{read\+Packet}} (char $\ast$packet\+Pointer)
\item 
void \mbox{\hyperlink{network_8cpp_acd29b973a6b796a6cb16a94b93f8e21a}{close\+All\+Connections}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{network_8cpp_a0e74175a64ca6de70034d06fb12f6712}\label{network_8cpp_a0e74175a64ca6de70034d06fb12f6712}} 
\mbox{\hyperlink{struct_control_data}{Control\+Data}} {\bfseries control\+Data}
\item 
\mbox{\Hypertarget{network_8cpp_a9972434fb32542e9e0cc8672b1e2e1e5}\label{network_8cpp_a9972434fb32542e9e0cc8672b1e2e1e5}} 
struct sockaddr\+\_\+in {\bfseries msg\+Struct}
\item 
\mbox{\Hypertarget{network_8cpp_a85dff369ae5d3b8aeaa94c172733f1f0}\label{network_8cpp_a85dff369ae5d3b8aeaa94c172733f1f0}} 
int {\bfseries msg\+Len} = sizeof(msg\+Struct)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
General networking functions. 

Functions in this file are responsible for subscribing to \mbox{\hyperlink{class_message_handler}{Message\+Handler}}, and opening sockets for messaging. See \mbox{\hyperlink{streamer_8cpp}{streamer.\+cpp}} and \mbox{\hyperlink{listener_8cpp}{listener.\+cpp}} for using the threads used for listening to messages and streaming data. The robot, haptic, and graphics code are one module. Each module has its own IP address and port, which is assigned to a specific module number by the \mbox{\hyperlink{class_message_handler}{Message\+Handler}}. At least two modules are required to run\+: 1) Robot and haptic code, and 2) Trial control code. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{network_8cpp_a2ed65f7844ae0c750272dbd3eca34fa6}\label{network_8cpp_a2ed65f7844ae0c750272dbd3eca34fa6}} 
\index{network.cpp@{network.cpp}!addMessageHandlerModule@{addMessageHandlerModule}}
\index{addMessageHandlerModule@{addMessageHandlerModule}!network.cpp@{network.cpp}}
\doxysubsubsection{\texorpdfstring{addMessageHandlerModule()}{addMessageHandlerModule()}}
{\footnotesize\ttfamily int add\+Message\+Handler\+Module (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function adds the robot environment to the \mbox{\hyperlink{class_message_handler}{Message\+Handler}}. Information such as the module number, IP address, and port are set through command-\/line inputs and stored in the control\+Data external struct. \mbox{\Hypertarget{network_8cpp_acd29b973a6b796a6cb16a94b93f8e21a}\label{network_8cpp_acd29b973a6b796a6cb16a94b93f8e21a}} 
\index{network.cpp@{network.cpp}!closeAllConnections@{closeAllConnections}}
\index{closeAllConnections@{closeAllConnections}!network.cpp@{network.cpp}}
\doxysubsubsection{\texorpdfstring{closeAllConnections()}{closeAllConnections()}}
{\footnotesize\ttfamily void close\+All\+Connections (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Close all messaging sockets \mbox{\Hypertarget{network_8cpp_a6d5326c15ff2fc6d7e380d1646c45e4a}\label{network_8cpp_a6d5326c15ff2fc6d7e380d1646c45e4a}} 
\index{network.cpp@{network.cpp}!closeMessagingSocket@{closeMessagingSocket}}
\index{closeMessagingSocket@{closeMessagingSocket}!network.cpp@{network.cpp}}
\doxysubsubsection{\texorpdfstring{closeMessagingSocket()}{closeMessagingSocket()}}
{\footnotesize\ttfamily void close\+Messaging\+Socket (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Closes the socket for this module. \mbox{\Hypertarget{network_8cpp_a499c60465b6a1609a460e77684f89ca9}\label{network_8cpp_a499c60465b6a1609a460e77684f89ca9}} 
\index{network.cpp@{network.cpp}!openMessagingSocket@{openMessagingSocket}}
\index{openMessagingSocket@{openMessagingSocket}!network.cpp@{network.cpp}}
\doxysubsubsection{\texorpdfstring{openMessagingSocket()}{openMessagingSocket()}}
{\footnotesize\ttfamily int open\+Messaging\+Socket (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This specifically opens the {\bfseries{listening}} port for this module. Sending ports are opened via \mbox{\hyperlink{class_message_handler}{Message\+Handler}}. In other words, this opens the socket that is assigned to this module. \mbox{\Hypertarget{network_8cpp_ae83f45850eda388f62e5dbae4c9baf5b}\label{network_8cpp_ae83f45850eda388f62e5dbae4c9baf5b}} 
\index{network.cpp@{network.cpp}!readPacket@{readPacket}}
\index{readPacket@{readPacket}!network.cpp@{network.cpp}}
\doxysubsubsection{\texorpdfstring{readPacket()}{readPacket()}}
{\footnotesize\ttfamily int read\+Packet (\begin{DoxyParamCaption}\item[{char $\ast$}]{packet\+Pointer }\end{DoxyParamCaption})}

Receives messages on the messaging socket and sends them to be parsed by the controller 
\begin{DoxyParams}{Parameters}
{\em packet\+Pointer} & is a char pointer to store the read-\/in bytes \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{controller_8h_a2f751138b5d47b3bcaf45aa63abfaeb4}{parse\+Packet}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{network_8cpp_a2ea5a85aec82381e125efc102f79ec83}\label{network_8cpp_a2ea5a85aec82381e125efc102f79ec83}} 
\index{network.cpp@{network.cpp}!subscribeToTrialControl@{subscribeToTrialControl}}
\index{subscribeToTrialControl@{subscribeToTrialControl}!network.cpp@{network.cpp}}
\doxysubsubsection{\texorpdfstring{subscribeToTrialControl()}{subscribeToTrialControl()}}
{\footnotesize\ttfamily int subscribe\+To\+Trial\+Control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Subscribe to the trial control module. This tells \mbox{\hyperlink{class_message_handler}{Message\+Handler}} to take all messages sent by Trial Control and send them to this module. 